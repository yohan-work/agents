# PRD: 스마트 컨텍스트 & 프로젝트 인지

**버전**: 1.0
**날짜**: 2026-01-14
**작성자**: Antigravity PM Agent
**상태**: 초안

---

## 1. 요약 (Executive Summary)
본 이니셔티브는 사용자 인터뷰에서 식별된 "컨텍스트 인식 부재(Context Blindness)" 문제를 해결하는 것을 목표로 합니다. 프로젝트 파일(import, 문서, 설정)을 자동으로 스캔, 인덱싱, 검색하는 지능형 컨텍스트 엔진을 구현하여, 에이전트의 답변이 사용자 코드베이스의 실제 상황에 기반하도록 합니다.

## 2. 문제 정의 (Problem Statement)
특히 복잡한 프로젝트(Next.js, 대규모 코드베이스 등)를 다루는 사용자들은 Antigravity가 다음과 같은 정보에 대한 인식이 부족하여 코드를 "할루시네이션(환각)"하는 경우가 많다고 보고했습니다.
1.  **의존성**: import된 컴포넌트와 그 타입.
2.  **규칙**: 프로젝트별 스타일(Tailwind config) 및 아키텍처.
3.  **문서**: `docs/`나 `README.md`에 있는 기존 가이드라인.

이로 인해 생성된 코드의 기각률이 높아지고, 수동으로 컨텍스트를 관리해야 하는 불편함이 발생합니다.

## 3. 목표 및 성공 지표 (Goals & Success Metrics)
- **목표**: "존재하지 않는 import 생성" 90% 감소.
- **목표**: 생성된 모든 UI 코드가 `tailwind.config.js`(존재 시)를 100% 준수.
- **지표**: 생성된 코드 청크의 "수용률(Acceptance Rate)" 증가.
- **지표**: 코드 생성 후 사용자의 수정 횟수 감소.

## 4. 유저 스토리 (User Stories)
- **프론트엔드 개발자로서**, `MyButton`을 사용하라고 요청했을 때 에이전트가 그 props를 이미 알고 있어서, 굳이 `MyButton.tsx`를 수동으로 열 필요가 없기를 원합니다.
- **테크 리드로서**, 에이전트가 인증 관련 질문에 답하기 전에 `docs/auth-flow.md`를 먼저 읽어서, 보안에 취약한 패턴을 제안하지 않기를 원합니다.
- **디자이너로서**, UI가 일관성 있게 보이도록 에이전트가 `tailwind.config.js`에 있는 내 커스텀 컬러를 사용하기를 원합니다.

## 5. 기능 요구사항 (Functional Requirements)

### 5.1 Import 해결
- 사용자가 파일 수정을 요청하면, 시스템은 AST를 파싱하여 모든 정적 import를 식별해야 합니다.
- 시스템은 이 import들의 타입과 시그니처를 재귀적으로 해결(최대 1 단계 깊이까지)해야 합니다.

### 5.2 설정(Config) 인지
- 시작 시, 에이전트는 다음 설정 파일들을 찾아야 합니다:
    - `tailwind.config.js` / `tailwind.config.ts`
    - `tsconfig.json`
    - `package.json`
- 이 설정들은 시스템 프롬프트나 컨텍스트 윈도우에 주입되어야 합니다.

### 5.3 문서 인덱싱
- 에이전트는 높은 수준의(high-level) 질문에 답할 때 `README.md`와 `docs/` 또는 `wiki/` 디렉토리의 마크다운 파일을 우선적으로 읽어야 합니다.

## 6. 비기능 요구사항 (Non-Functional Requirements)
- **레이턴시**: 컨텍스트 검색이 요청 레이턴시를 500ms 이상 증가시켜서는 안 됩니다.
- **프라이버시**: 코드가 외부로 인덱싱되어서는 안 되며, 모든 크롤링은 로컬에서 이루어져야 합니다.

## 7. UI/UX 가이드라인
- **컨텍스트 표시기**: 컨텍스트가 수집되고 있음을 알리는 "의존성 5개 읽는 중..."과 같은 작은 UI 배지 표시.
- **수동 제외**: 사용자가 특정 파일(예: 레거시 코드)을 컨텍스트에서 명시적으로 제외할 수 있어야 함.

## 8. 열린 질문 (Open Questions)
- "모든 import 읽기"가 토큰 제한에 걸릴 수 있는 초대형 모노레포는 어떻게 처리할 것인가?
- 전체 코드베이스에 대해 RAG(Vector DB)를 사용할 것인가, 아니면 AST 기반 조회만 사용할 것인가?
