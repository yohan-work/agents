# V-company

AI 에이전트 기반 가상 회사 시뮬레이션입니다. 한국 기업의 직급 체계를 가진 9명의 AI 직원이 배치된 가상 회의실에서, 사용자가 직원들과 실시간으로 대화할 수 있는 인터랙티브 환경을 제공합니다. 각 에이전트는 고유한 직급, 성격, 업무 스타일, 한국어 경어 말투 규칙을 가지고 있으며 Ollama로 구동되는 로컬 LLM을 통해 응답합니다.

<img width="1697" height="869" alt="image" src="https://github.com/user-attachments/assets/e28b9532-609a-456f-8db7-a4e106d65a63" />

---

## 기술 스택

| 분류          | 기술                       |
| ------------- | -------------------------- |
| 프레임워크    | Next.js 16 (App Router)    |
| UI 라이브러리 | React 19                   |
| 언어          | TypeScript 5 (strict mode) |
| 스타일링      | Tailwind CSS 4             |
| 애니메이션    | Framer Motion 12           |
| 아이콘        | Lucide React               |
| AI 백엔드     | Ollama (llama3)            |
| 유틸리티      | clsx, tailwind-merge       |

---

## 주요 기능

**보드룸 시각화**

- 9명의 에이전트가 테이블 주위에 배치된 회의실 레이아웃
- 각 에이전트 아바타에 이름, 직급, 역할 표시
- 응답 중인 에이전트에 발언 중 인디케이터 표시
- 에이전트 아바타 hover 시 프로필 카드 팝업 (직급, 역할, 성격, 현재 입장, 최근 발언)

**멀티 에이전트 대화**

- 사용자 메시지당 2~3명의 에이전트가 순차적으로 자동 응답
- 에이전트 간 위계 관계와 성격 차이를 반영한 답변 생성

**토론 모드**

- 사용자가 안건을 제시하면 9명 전원이 직급순(부회장 -> 사원)으로 순차 발언
- 각 에이전트가 이전 발언자의 의견을 참조하여 동의/반박/보충하며 자연스러운 토론 진행
- 에이전트별 입장 태그 자동 분류: 찬성, 반대, 중립, 신중
- 토론 진행 상황 프로그레스 바 표시 (현재 발언자, n/9 진행률)
- 토론 중단 버튼 지원

**보드룸 시각적 인터랙션**

- 발언 중인 에이전트 아바타 옆 실시간 말풍선 오버레이 (내용 미리보기, 스트리밍 커서)
- 토론 시 에이전트별 입장(찬성/반대/중립/신중) 아이콘이 아바타에 표시
- 미발언 에이전트 대기 중 점멸(fade) 애니메이션
- 에이전트 간 이름 언급 감지 시 SVG 곡선 연결선 애니메이션 (입장별 색상 구분)

**토론 결과 시각화**

- 토론 종료 후 보드룸에 결과 패널 오버레이 표시
- 의견 분포 바 차트 (찬성/반대/신중/중립 비율, 순차 애니메이션)
- 다수 의견 판정 표시
- 9명 참석자별 입장 그리드 (아바타 + stance 카드, 순차 팝업)
- 핵심 발언 타임라인 (에이전트별 첫 문장 추출, 입장 색상 표시)
- 닫기 버튼으로 결과 패널 토글 가능

**대결 모드 (Debate Arena)**

- 2명의 에이전트를 선택하여 1:1 토론 대결 진행
- 라운드 수 선택 (2 / 3 / 5 라운드)
- 격투 게임 스타일 UI: HP 바, 공격/반박 턴 표시, 어두운 아레나 테마
- 각 라운드마다 공격 측 발언 → 반박 측 발언 순서로 스트리밍 진행
- 대결 종료 후 나머지 7명 에이전트가 심판으로 판정 (LLM 1회 호출)
- 심판 투표 순차 공개 애니메이션 (0.4초 간격)
- 최종 승자 발표: HP 바 반영, 트로피 표시, 점수 공개
- 라운드 리플레이 (접기/펼치기)로 전체 대결 내용 재확인 가능

**에이전트 타겟팅**

- 특정 직원 아바타를 클릭해 해당 에이전트에게 직접 질문 가능
- 선택된 에이전트 시각적 강조 표시

**스트리밍 응답**

- Ollama API와 연동한 실시간 텍스트 스트리밍
- 응답 생성 중 타이핑 애니메이션 표시

**대화 기록 관리**

- 최대 20개 메시지 기준 컨텍스트 유지
- 첫 번째 사용자 메시지를 항상 보존하여 대화 흐름 일관성 확보

**모바일 반응형**

- 보드룸 뷰와 채팅 뷰 간 전환 지원
- 소형 화면에 최적화된 레이아웃 자동 적용

**한국어 경어체 시스템**

- 직급별 말투 규칙 적용 (임원 격식체, 실무진 표준 경어 등)
- 현재 시각 및 한국 로케일 컨텍스트 시스템 프롬프트에 포함

---

## 에이전트 구성

### 임원진

| 이름     | 직급   | 담당 분야                   |
| -------- | ------ | --------------------------- |
| 김부회장 | 부회장 | 전략 총괄                   |
| 이전무   | 전무   | 재무 / 데이터 기반 의사결정 |
| 박상무   | 상무   | 인사 / 리스크 관리          |

### 중간 관리자

| 이름   | 직급 | 담당 분야               |
| ------ | ---- | ----------------------- |
| 최부장 | 부장 | 사업 1팀 총괄           |
| 정차장 | 차장 | 기획 / 체계적 업무 관리 |
| 강과장 | 과장 | 영업 / 현장 중심 업무   |

### 실무진

| 이름   | 직급 | 특성                        |
| ------ | ---- | --------------------------- |
| 송대리 | 대리 | 핵심 실무자, 효율 중심      |
| 한사원 | 사원 | 신입, 열정적                |
| 윤사원 | 사원 | 신입, 워라밸 중시 (MZ 성향) |

---

## 프로젝트 구조

```
company-simulation/
├── app/
│   ├── api/
│   │   ├── chat/
│   │   │   └── route.ts              # Ollama 연동 스트리밍 API (일반 대화)
│   │   ├── debate/
│   │   │   ├── route.ts              # 대결 발언 스트리밍 API (공격/반박 프롬프트)
│   │   │   └── judge/
│   │   │       └── route.ts          # 심판 판정 API (7명 일괄, 비스트리밍)
│   │   └── discuss/
│   │       └── route.ts              # 토론 전용 API (stance 태그 파싱, 토론 컨텍스트 프롬프트)
│   ├── components/
│   │   ├── MeetingRoom.tsx           # 보드룸 + 채팅 메인 UI (토론/대결 모드 통합)
│   │   ├── DebateArena.tsx           # 대결 모드 아레나 UI (에이전트 선택, 배틀, 심판, 결과)
│   │   ├── SpeechBubble.tsx          # 발언 중 에이전트 아바타 옆 실시간 말풍선 오버레이
│   │   ├── AgentProfileCard.tsx      # 에이전트 hover 시 프로필 카드 팝업
│   │   ├── ConnectionLine.tsx        # 에이전트 간 이름 언급 감지 + SVG 연결선 애니메이션
│   │   └── DiscussionSummary.tsx     # 토론 결과 시각화 패널 (분포 바, 참석자 그리드, 핵심 발언)
│   ├── hooks/
│   │   ├── useDiscussion.ts          # 토론 로직 커스텀 훅 (직급순 9명 순차 발언, stance 관리)
│   │   └── useDebateArena.ts         # 대결 모드 로직 훅 (에이전트 선택, 라운드 진행, 심판 호출)
│   ├── data/
│   │   └── agents.ts                 # 에이전트 페르소나 및 시스템 프롬프트 정의
│   ├── types/
│   │   └── agent.ts                  # TypeScript 인터페이스 및 타입 (AgentStance, DiscussionState 등)
│   ├── lib/
│   │   └── utils.ts                  # cn 유틸리티 함수
│   ├── layout.tsx
│   ├── page.tsx
│   └── globals.css
├── AGENTS.md
└── README.md
```

---

## 버전

v3.0.0 — 대결 모드 (Debate Arena): 1:1 에이전트 대결, 격투 게임 스타일 UI, 심판 판정 시스템 추가

v2.0.0 — 토론 모드, 보드룸 시각적 인터랙션 (말풍선, 연결선, 프로필 카드), 토론 결과 시각화 추가

v1.0.0 — 보드룸 시각화, 9인 에이전트 페르소나, 스트리밍 대화 기능 구현 완료
